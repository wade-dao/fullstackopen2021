(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{42:function(e,t,n){"use strict";n.r(t);var c=n(17),a=n.n(c),r=n(18),o=n(3),i=n(1),u=n(0),d=function(e){var t=e.person,n=e.handleDelete;return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:t.name}),Object(u.jsx)("td",{children:t.number}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{onClick:function(){return n(t.id,t.name)},children:"delete"})})]})},s=function(e){var t=e.persons,n=e.handleDelete,c=t.map((function(e,t){return Object(u.jsx)(d,{person:e,handleDelete:n},t)}));return Object(u.jsx)("table",{children:Object(u.jsx)("tbody",{children:c})})},l=function(e){var t=e.persons,n=e.handleDelete;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{children:"Numbers"}),Object(u.jsx)(s,{persons:t,handleDelete:n})]})},j=function(e){var t=e.search,n=e.handleSearchChange;return Object(u.jsx)("div",{children:Object(u.jsxs)("div",{children:["filter shown with ",Object(u.jsx)("input",{onChange:n,value:t})]})})},b=function(e){var t=e.addNewPerson,n=e.handleNameChange,c=e.newName,a=e.handleNumberChange,r=e.newNumber;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{children:"Add a new"}),Object(u.jsxs)("form",{onSubmit:t,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{onChange:n,value:c})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{onChange:a,value:r})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})]})},h=n(8),f=function(e){var t=e.message,n={fontSize:20,background:"lightgrey",borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},c=Object(h.a)({},n);c.color="green";var a=Object(h.a)({},n);return a.color="red",null===t.content||""===t.content?null:Object(u.jsx)("div",{style:t.type?c:a,children:t.content})},O=n(5),m=n.n(O),v="/api/persons",p={getAll:function(){return m.a.get(v)},create:function(e){return m.a.post(v,e)},update:function(e,t){return m.a.put("".concat(v,"/").concat(e),t)},deletePerson:function(e){return m.a.delete("".concat(v,"/").concat(e))}},x=function(){var e=Object(i.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)(""),d=Object(o.a)(a,2),s=d[0],h=d[1],O=Object(i.useState)(""),m=Object(o.a)(O,2),v=m[0],x=m[1],g=Object(i.useState)(""),w=Object(o.a)(g,2),y=w[0],C=w[1],N=Object(i.useState)([]),S=Object(o.a)(N,2),k=S[0],D=S[1],P=Object(i.useState)({content:"",type:!0}),A=Object(o.a)(P,2),L=A[0],T=A[1];Object(i.useEffect)((function(){p.getAll().then((function(e){c(e.data),D(e.data)}))}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(f,{message:L}),Object(u.jsx)(j,{search:y,handleSearchChange:function(e){if(C(e.target.value),""!==e.target.value){var t=n.filter((function(t){return t.name.toLocaleLowerCase().includes(e.target.value.toLocaleLowerCase())}));D(t)}else D(n)}}),Object(u.jsx)(b,{addNewPerson:function(e){if(e.preventDefault(),""!==s&&""!==v){var t={name:s,number:v},a={content:"",type:!0},o=n.map((function(e){return e.name}));if(o.includes(s)){if(window.confirm(s+" is already added to the phonebook, replace the old number with a new one? ")){var i=o.indexOf(s),u=n[i].id;p.update(u,t).then((function(e){var t=Object(r.a)(n);t[i].number=e.data.number,c(t),h(""),x(""),C(""),D(t);var o={content:"Updated ".concat(e.data.name),type:!0};T(o),setTimeout((function(){T(a)}),3e3)})).catch((function(e){var n={content:"Information of ".concat(t.name," has already been removed from server."),type:!1};T(n),setTimeout((function(){T(a)}),5e3)}))}}else p.create(t).then((function(e){c(n.concat(e.data)),h(""),x(""),C(""),D(n.concat(e.data));var t={content:"Added ".concat(e.data.name),type:!0};T(t),setTimeout((function(){T(a)}),3e3)})).catch((function(e){var t={content:"Information about ".concat(e),type:!1};T(t),setTimeout((function(){T(a)}),5e3)}))}},handleNameChange:function(e){h(e.target.value)},newName:s,handleNumberChange:function(e){x(e.target.value)},newNumber:v}),Object(u.jsx)(l,{persons:k,handleDelete:function(e,t){window.confirm("Delete "+t+" ?")&&p.deletePerson(e).then((function(t){var a=n.filter((function(t){return t.id!==e}));c(a),h(""),x(""),C(""),D(a)}))}})]})};a.a.render(Object(u.jsx)(x,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.e87374e4.chunk.js.map